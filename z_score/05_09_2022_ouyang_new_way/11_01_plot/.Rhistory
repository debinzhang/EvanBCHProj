library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
print(head(zscore_data, 3))
zscore_data
}
test_data
getRobustZScoreByDataset(test_data, Dataset)
getRobustZScoreByDataset(test_data, BMI)
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
getRobustZScoreByDataset(test_data, BMI)
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1)
t2 <- rmOutlier(t1, -3.5, 3.5)
t1
t2
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
#data[data$zscore<high & data$zscore>low, ]
data_no_outlier <- subset(data, data$zscore>Lower & data$zscore < Upper)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
#data[data$zscore<high & data$zscore>low, ]
data_no_outlier <- subset(data, data$zscore>Low & data$zscore < high)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
#data[data$zscore<high & data$zscore>low, ]
data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t1
t2
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t2
t1
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data)
summary(aov_rst)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t2
AovStats(t1, 'BMI')
AovStats(t2, 'BMI')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data)
summary(aov_rst)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t2
AovStats(t1, 'BMI')
AovStats(t2, 'BMI')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
#print(head(zscore_data, 3))
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data)
summary(aov_rst)
}
t1 <- getRobustZScoreByDataset(test_data, 'BMI')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
#grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars([[feature]]), list(group_median = median, group_mad = mad))
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
#grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars(get(feature), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data)
summary(aov_rst)
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t1
t2
AovStats(t1, 'BMI')
AovStats(t2, 'BMI')
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t4 <- t2 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_bankssts_thickness')
AovStats(t4, 'lh_bankssts_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- t5 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t5, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
t6 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t6, 'lh_bankssts_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t5, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t4 <- t2 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_inferiorparietal_thickness')
AovStats(t4, 'lh_inferiorparietal_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t5, 'lh_inferiorparietal_thickness')
AovStats(t6, 'lh_inferiorparietal_thickness')
AovStats <- function(data_in, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data_in)
summary(aov_rst)
}
AovStats(t6, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
t3 <- getRobustZScoreByDataset(data_raw, lh_inferiorparietal_thickness)
t3 <- getRobustZScoreByDataset(data_raw, lh_inferiorparietal_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_inferiorparietal_thickness')
AovStats(t4, 'lh_inferiorparietal_thickness')
# lh_superiorfrontal_thickness
t3 <- getRobustZScoreByDataset(data_raw, lh_superiorfrontal_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_superiorfrontal_thickness')
AovStats(t4, 'lh_superiorfrontal_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_superiorfrontal_thickness)
t6 <- rmOutlier(t5, -3.5, 3.5)
AovStats(t5, 'lh_superiorfrontal_thickness')
AovStats(t6, 'lh_superiorfrontal_thickness')
AovStats <- function(data_in, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data_in)
print(summary(aov_rst))
print(TukeyHSD(aov_rst))
}
# lh_superiorfrontal_thickness
t3 <- getRobustZScoreByDataset(data_raw, lh_superiorfrontal_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_superiorfrontal_thickness')
AovStats(t4, 'lh_superiorfrontal_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_superiorfrontal_thickness)
AovStats(t6, 'lh_superiorfrontal_thickness')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_03_harm_w_dataset"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
#test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data_in, feature) {
aov_rst <- aov(get(feature) ~ Dataset, data = data_in)
print(summary(aov_rst))
print(TukeyHSD(aov_rst))
}
AovStats(t2, 'BMI')
AovStats(t2, 'BMI')
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t4 <- t3 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_bankssts_thickness')
AovStats(t4, 'lh_bankssts_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t5, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
t3 <- getRobustZScoreByDataset(data_raw, lh_inferiorparietal_thickness)
t3 <- getRobustZScoreByDataset(data_raw, lh_inferiorparietal_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_inferiorparietal_thickness')
AovStats(t4, 'lh_inferiorparietal_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_inferiorparietal_thickness)
t6 <- rmOutlier(t5, -3.5, 3.5)
AovStats(t5, 'lh_inferiorparietal_thickness')
AovStats(t6, 'lh_inferiorparietal_thickness')
t3 <- getRobustZScoreByDataset(data_raw, lh_superiorfrontal_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_superiorfrontal_thickness')
AovStats(t4, 'lh_superiorfrontal_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_superiorfrontal_thickness)
t6 <- rmOutlier(t5, -3.5, 3.5)
AovStats(t5, 'lh_superiorfrontal_thickness')
AovStats(t6, 'lh_superiorfrontal_thickness')
data_raw1 <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
data_harmo1 <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
t3 <- getRobustZScoreByDataset(data_raw1, lh_bankssts_curvind)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_bankssts_curvind')
AovStats(t4, 'lh_bankssts_curvind')
t5 <- getRobustZScoreByDataset(data_harmo1, lh_bankssts_curvind)
t6 <- rmOutlier(t5, -3.5, 3.5)
AovStats(t5, 'lh_bankssts_curvind')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_gauscurv.csv", stringsAsFactors = TRUE)
#data_raw <- read.csv("preHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
#data_harmo <- read.csv("postHarmo_LH_curvind.csv", stringsAsFactors = TRUE)
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data_in, feature) {
aov_rst <- aov(data_in$zscore ~ Dataset, data = data_in)
print(summary(aov_rst))
print(TukeyHSD(aov_rst))
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t1
t2
AovStats(t1, 'BMI')
AovStats(t2, 'BMI')
AovStats(t2, 'BMI')
AovStats(t2, 'BMI')
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t4 <- t3 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_bankssts_thickness')
AovStats(t4, 'lh_bankssts_thickness')
library(ggplot2)
library(dplyr)
wd <- "/Users/dzhang/Gits/EvanBCHProj/z_score/05_09_2022_ouyang_new_way/11_01_plot"
setwd(wd)
data_raw <- read.csv("preHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
data_harmo <- read.csv("postHarmo_LH_thickness.csv", stringsAsFactors = TRUE)
test_data <- read.csv("testData.csv", stringsAsFactors = TRUE)
test_data
getRobustZScoreByDataset <- function(data, feature) {
grouped_data <- data %>% group_by(Dataset) %>% summarise_at(vars({{feature}}), list(group_median = median, group_mad = mad))
merged_data <- merge(data, grouped_data, by="Dataset")
zscore_data<-merged_data %>% mutate(zscore=({{feature}} - group_median)/group_mad)
zscore_data
}
rmOutlier <- function(data, low, high) {
data[data$zscore<high & data$zscore>low, ]
#data_no_outlier <- subset(data, data$zscore>low & data$zscore < high)
}
AovStats <- function(data_in, feature) {
aov_rst <- aov(data_in$zscore ~ Dataset, data = data_in)
print(summary(aov_rst))
print(TukeyHSD(aov_rst))
}
t1 <- getRobustZScoreByDataset(test_data, BMI)
t2 <- rmOutlier(t1, -3.5, 3.5)
t1
t2
AovStats(t1, 'BMI')
AovStats(t2, 'BMI')
t3 <- getRobustZScoreByDataset(data_raw, lh_bankssts_thickness)
t4 <- rmOutlier(t3, -3.5, 3.5)
AovStats(t3, 'lh_bankssts_thickness')
AovStats(t4, 'lh_bankssts_thickness')
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- rmOutlier(t3, -3.5, 3.5)
t6 <- rmOutlier(t5, -3.5, 3.5)
t5 <- getRobustZScoreByDataset(data_harmo, lh_bankssts_thickness)
t6 <- rmOutlier(t5, -3.5, 3.5)
AovStats(t5, 'lh_bankssts_thickness')
AovStats(t6, 'lh_bankssts_thickness')
